const fs = require('fs');
const path = require('path');

// 模拟React Native的AsyncStorage清除
const clearUserData = () => {
  console.log('🧹 清除用户数据，模拟第一次打开APP...');
  
  // 需要清除的AsyncStorage键列表
  const keysToRemove = [
    'userData',
    'authToken',
    'searchHistory',
    'vocabulary',
    'learningRecords',
    'userStats',
    'badges',
    'last_sync_time',
    'user_stats_cache',
    'user_vocabulary_cache',
    'badges_cache',
    'selectedLanguage',
    'learningLanguages',
    'appLanguage',
    'initialLanguageSetup',
    'autoGeneratedGuestId',
    'sync_queue',
    'failed_sync_items'
  ];
  
  console.log('📋 将清除以下数据:');
  keysToRemove.forEach(key => {
    console.log(`  - ${key}`);
  });
  
  console.log('\n💡 使用方法:');
  console.log('1. 在React Native应用中，打开开发者菜单');
  console.log('2. 选择 "Debug" 或 "调试"');
  console.log('3. 在调试控制台中运行以下代码:');
  console.log('\n```javascript');
  console.log('import AsyncStorage from "@react-native-async-storage/async-storage";');
  console.log('');
  console.log('const keysToRemove = [');
  keysToRemove.forEach(key => {
    console.log(`  "${key}",`);
  });
  console.log('];');
  console.log('');
  console.log('await AsyncStorage.multiRemove(keysToRemove);');
  console.log('console.log("✅ 用户数据已清除，重启APP即可模拟第一次打开");');
  console.log('```');
  
  console.log('\n🔄 或者重启APP时清除数据:');
  console.log('1. 完全关闭APP');
  console.log('2. 在设备设置中清除APP数据');
  console.log('3. 重新打开APP');
  
  console.log('\n📱 iOS设备:');
  console.log('- 设置 > 通用 > iPhone存储空间 > 找到APP > 删除APP');
  console.log('- 重新安装APP');
  
  console.log('\n🤖 Android设备:');
  console.log('- 设置 > 应用 > 找到APP > 存储 > 清除数据');
  console.log('- 重新打开APP');
};

clearUserData(); 