# ğŸ“‹ è®¢é˜…åŠŸèƒ½æµ‹è¯•æŒ‡å—

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯14å¤©è¯•ç”¨æœŸç»“æŸåçš„åŠŸèƒ½é™åˆ¶æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œç¡®ä¿ï¼š
- è¯•ç”¨æœŸå†…æ‰€æœ‰åŠŸèƒ½å¯ç”¨
- è¯•ç”¨æœŸç»“æŸååªæœ‰æŸ¥å•è¯åŠŸèƒ½å¯ç”¨
- å…¶ä»–åŠŸèƒ½è¢«é”å®šå¹¶æ˜¾ç¤ºå‡çº§å¼¹çª—
- ä»˜è´¹ä¼šå‘˜å¯ä»¥è®¿é—®æ‰€æœ‰åŠŸèƒ½

## ğŸ§ª æµ‹è¯•å·¥å…·ä½¿ç”¨

### 1. æ‰“å¼€æµ‹è¯•å·¥å…·

åœ¨**å¼€å‘æ¨¡å¼**ä¸‹ï¼Œè¿›å…¥ `ProfileScreen` â†’ `è®¾ç½®` â†’ `ğŸ§ª è®¢é˜…çŠ¶æ€æµ‹è¯•`

### 2. å¯ç”¨çš„æµ‹è¯•çŠ¶æ€

| çŠ¶æ€ | æè¿° | é¢„æœŸè¡Œä¸º |
|------|------|----------|
| **è¯•ç”¨æœŸæ¿€æ´»ä¸­** | ç”¨æˆ·æ­£åœ¨14å¤©è¯•ç”¨æœŸå†… | æ‰€æœ‰åŠŸèƒ½å¯ç”¨ |
| **è¯•ç”¨æœŸå·²ç»“æŸ** | 14å¤©è¯•ç”¨æœŸå·²ç»“æŸ | åªæœ‰æŸ¥å•è¯åŠŸèƒ½å¯ç”¨ |
| **ä»˜è´¹ä¼šå‘˜ï¼ˆæœˆåº¦ï¼‰** | ä»˜è´¹æœˆåº¦ä¼šå‘˜ | æ‰€æœ‰åŠŸèƒ½å¯ç”¨ |
| **ä»˜è´¹ä¼šå‘˜ï¼ˆå¹´åº¦ï¼‰** | ä»˜è´¹å¹´åº¦ä¼šå‘˜ | æ‰€æœ‰åŠŸèƒ½å¯ç”¨ |
| **å…è´¹ç”¨æˆ·** | ä»æœªè¯•ç”¨è¿‡çš„å…è´¹ç”¨æˆ· | åªæœ‰æŸ¥å•è¯åŠŸèƒ½å¯ç”¨ |

### 3. å¿«æ·æ“ä½œ

- **æ¨¡æ‹Ÿè¯•ç”¨æœŸåˆ°æœŸ**ï¼šç›´æ¥åˆ‡æ¢åˆ°è¯•ç”¨æœŸç»“æŸçŠ¶æ€
- **æ¨¡æ‹Ÿè´­ä¹°æœˆåº¦è®¢é˜…**ï¼šåˆ‡æ¢åˆ°ä»˜è´¹æœˆåº¦ä¼šå‘˜çŠ¶æ€
- **é‡ç½®ä¸ºè¯•ç”¨æœŸ**ï¼šé‡ç½®åˆ°è¯•ç”¨æœŸæ¿€æ´»çŠ¶æ€
- **æ¸…é™¤æµ‹è¯•çŠ¶æ€**ï¼šæ¢å¤æ­£å¸¸æ¨¡å¼

## ğŸ” åŠŸèƒ½æµ‹è¯•æ¸…å•

### âœ… è¯•ç”¨æœŸæ¿€æ´»çŠ¶æ€æµ‹è¯•

1. è®¾ç½®æµ‹è¯•çŠ¶æ€ä¸º "è¯•ç”¨æœŸæ¿€æ´»ä¸­"
2. éªŒè¯ä»¥ä¸‹åŠŸèƒ½å¯ç”¨ï¼š
   - âœ… å¤ä¹ åŠŸèƒ½ (ReviewIntroScreen)
   - âœ… è¯æ±‡æœ¬åŠŸèƒ½ (VocabularyScreen)
   - âœ… æ¯æ—¥å¥–åŠ± (DailyRewardsButton)
   - âœ… é«˜çº§æœç´¢ (WordSearchScreen)
   - âœ… æŸ¥å•è¯åŠŸèƒ½ï¼ˆåŸºç¡€ï¼‰

### âŒ è¯•ç”¨æœŸç»“æŸçŠ¶æ€æµ‹è¯•

1. è®¾ç½®æµ‹è¯•çŠ¶æ€ä¸º "è¯•ç”¨æœŸå·²ç»“æŸ"
2. éªŒè¯ä»¥ä¸‹åŠŸèƒ½è¢«é”å®šï¼š
   - âŒ å¤ä¹ åŠŸèƒ½ â†’ æ˜¾ç¤ºå‡çº§å¼¹çª—
   - âŒ è¯æ±‡æœ¬åŠŸèƒ½ â†’ æ˜¾ç¤ºå‡çº§å¼¹çª—
   - âŒ æ¯æ—¥å¥–åŠ± â†’ æ˜¾ç¤ºå‡çº§å¼¹çª—
   - âŒ é«˜çº§æœç´¢ï¼ˆéä¸­è‹±æ–‡ï¼‰ â†’ æ˜¾ç¤ºå‡çº§å¼¹çª—
   - âœ… æŸ¥å•è¯åŠŸèƒ½ï¼ˆä¸­è‹±æ–‡ï¼‰ â†’ æ­£å¸¸ä½¿ç”¨

### ğŸ’ ä»˜è´¹ä¼šå‘˜çŠ¶æ€æµ‹è¯•

1. è®¾ç½®æµ‹è¯•çŠ¶æ€ä¸º "ä»˜è´¹ä¼šå‘˜ï¼ˆæœˆåº¦ï¼‰"
2. éªŒè¯ä»¥ä¸‹åŠŸèƒ½å…¨éƒ¨å¯ç”¨ï¼š
   - âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ä½¿ç”¨
   - âœ… æ— å‡çº§å¼¹çª—

## ğŸ® æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1ï¼šæ¨¡æ‹Ÿè¯•ç”¨æœŸåˆ°æœŸ

```bash
1. æ‰“å¼€æµ‹è¯•å·¥å…·é¢æ¿
2. ç‚¹å‡» "æ¨¡æ‹Ÿè¯•ç”¨æœŸåˆ°æœŸ"
3. ç¡®è®¤å½“å‰çŠ¶æ€å˜ä¸º "è¯•ç”¨æœŸå·²ç»“æŸ"
4. æµ‹è¯•å„ä¸ªåŠŸèƒ½å…¥å£
```

### æ­¥éª¤2ï¼šæµ‹è¯•åŠŸèƒ½é™åˆ¶

```bash
1. è¿›å…¥ ReviewIntroScreen
2. ç‚¹å‡»å¤ä¹ ç›¸å…³æŒ‰é’®
3. éªŒè¯å‡çº§å¼¹çª—æ˜¯å¦å‡ºç°
4. æµ‹è¯•å…¶ä»–å—é™åŠŸèƒ½
```

### æ­¥éª¤3ï¼šæµ‹è¯•å‡çº§å¼¹çª—

```bash
1. ç‚¹å‡»å—é™åŠŸèƒ½
2. éªŒè¯å¼¹çª—å†…å®¹ï¼š
   - åŠŸèƒ½å›¾æ ‡å’Œåç§°
   - åŠŸèƒ½æè¿°
   - å‡çº§å¥½å¤„åˆ—è¡¨
   - "ç«‹å³å‡çº§" æŒ‰é’®
   - "ç¨åå†è¯´" æŒ‰é’®
```

### æ­¥éª¤4ï¼šæµ‹è¯•ä»˜è´¹ä¼šå‘˜

```bash
1. ç‚¹å‡» "æ¨¡æ‹Ÿè´­ä¹°æœˆåº¦è®¢é˜…"
2. ç¡®è®¤æ‰€æœ‰åŠŸèƒ½æ¢å¤å¯ç”¨
3. éªŒè¯æ— å‡çº§å¼¹çª—å‡ºç°
```

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šæµ‹è¯•çŠ¶æ€ä¸ç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿åœ¨å¼€å‘æ¨¡å¼ä¸‹ (`__DEV__ = true`)
2. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
3. å°è¯•æ¸…é™¤æµ‹è¯•çŠ¶æ€åé‡æ–°è®¾ç½®

### é—®é¢˜2ï¼šå‡çº§å¼¹çª—ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `FeatureAccessService.setUpgradeModalCallback` æ˜¯å¦æ­£ç¡®è®¾ç½®
2. ç¡®è®¤ `checkAndHandleAccess` è¿”å› `false`
3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

### é—®é¢˜3ï¼šåŠŸèƒ½æƒé™æ£€æŸ¥ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `subscriptionService.checkSubscriptionStatus()` è¿”å›çš„çŠ¶æ€
2. éªŒè¯ `featureAccessService.ts` ä¸­çš„æƒé™é…ç½®
3. ç¡®è®¤æµ‹è¯•æ•°æ®æ ¼å¼æ­£ç¡®

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## åŠŸèƒ½æƒé™æµ‹è¯•æŠ¥å‘Š

### æµ‹è¯•ç¯å¢ƒ
- æ—¥æœŸï¼š[æµ‹è¯•æ—¥æœŸ]
- ç‰ˆæœ¬ï¼š[åº”ç”¨ç‰ˆæœ¬]
- å¹³å°ï¼š[iOS/Android]

### æµ‹è¯•ç»“æœ

| åŠŸèƒ½ | è¯•ç”¨æœŸå†… | è¯•ç”¨æœŸç»“æŸ | ä»˜è´¹ä¼šå‘˜ | çŠ¶æ€ |
|------|----------|------------|----------|------|
| å¤ä¹ åŠŸèƒ½ | âœ… | âŒ | âœ… | PASS |
| è¯æ±‡æœ¬ | âœ… | âŒ | âœ… | PASS |
| æ¯æ—¥å¥–åŠ± | âœ… | âŒ | âœ… | PASS |
| é«˜çº§æœç´¢ | âœ… | âŒ | âœ… | PASS |
| æŸ¥å•è¯ | âœ… | âœ… | âœ… | PASS |

### å‡çº§å¼¹çª—æµ‹è¯•
- [ ] å¼¹çª—æ­£å¸¸æ˜¾ç¤º
- [ ] åŠŸèƒ½å›¾æ ‡æ­£ç¡®
- [ ] æ–‡æ¡ˆå‡†ç¡®
- [ ] æŒ‰é’®åŠŸèƒ½æ­£å¸¸

### é—®é¢˜è®°å½•
[è®°å½•å‘ç°çš„é—®é¢˜]

### æ€»ç»“
[æµ‹è¯•æ€»ç»“]
```

## ğŸš€ è‡ªåŠ¨åŒ–æµ‹è¯•å»ºè®®

å»ºè®®åç»­å¯ä»¥æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š

```typescript
// ç¤ºä¾‹ï¼šè‡ªåŠ¨åŒ–åŠŸèƒ½æƒé™æµ‹è¯•
describe('Feature Access Control', () => {
  beforeEach(async () => {
    await SubscriptionTestService.clearTestState();
  });

  it('should restrict features when trial expired', async () => {
    await SubscriptionTestService.setTestState('trial_expired');
    
    const canAccessReview = await FeatureAccessService.canAccessFeature('review');
    expect(canAccessReview).toBe(false);
    
    const canAccessWordLookup = await FeatureAccessService.canAccessFeature('wordLookup');
    expect(canAccessWordLookup).toBe(true);
  });
});
```

## ğŸ¯ éªŒæ”¶æ ‡å‡†

æµ‹è¯•é€šè¿‡çš„æ ‡å‡†ï¼š

1. âœ… è¯•ç”¨æœŸå†…æ‰€æœ‰åŠŸèƒ½å¯ç”¨
2. âœ… è¯•ç”¨æœŸç»“æŸååªæœ‰æŸ¥å•è¯å¯ç”¨
3. âœ… å—é™åŠŸèƒ½æ˜¾ç¤ºå‡çº§å¼¹çª—
4. âœ… ä»˜è´¹ä¼šå‘˜æ‰€æœ‰åŠŸèƒ½å¯ç”¨
5. âœ… å‡çº§å¼¹çª—UIæ­£ç¡®æ˜¾ç¤º
6. âœ… çŠ¶æ€åˆ‡æ¢æ­£å¸¸å·¥ä½œ
7. âœ… æµ‹è¯•å·¥å…·åŠŸèƒ½å®Œæ•´

---

**æ³¨æ„**ï¼šæµ‹è¯•å®Œæˆåè®°å¾—æ¸…é™¤æµ‹è¯•çŠ¶æ€ï¼Œæ¢å¤æ­£å¸¸æ¨¡å¼ï¼
