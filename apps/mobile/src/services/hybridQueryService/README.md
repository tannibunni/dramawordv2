# æ™ºèƒ½æ··åˆæŸ¥è¯¢ç­–ç•¥

## ğŸ¯ æ ¸å¿ƒæ€æƒ³

**ç¦»çº¿è¯åº“é‡Šä¹‰ + OpenAIä¾‹å¥ = å®Œæ•´è¯æ¡**

## ğŸ“Š æŸ¥è¯¢ç­–ç•¥å†³ç­–

### 1. **æœ‰æœ¬åœ°è¯åº“æ—¶**
```
ç­–ç•¥: local_first
- âœ… ä½¿ç”¨æœ¬åœ°è¯åº“è·å–é‡Šä¹‰
- âœ… è°ƒç”¨OpenAIè¡¥å……ä¾‹å¥
- âŒ ä¸å­˜å‚¨åˆ°CloudWords (é¿å…é‡å¤)
- ğŸ¯ ç»“æœ: æœ¬åœ°é‡Šä¹‰ + OpenAIä¾‹å¥
```

### 2. **æ— æœ¬åœ°è¯åº“æ—¶**
```
ç­–ç•¥: online_first  
- âœ… ä½¿ç”¨åœ¨çº¿ç¿»è¯‘è·å–åŸºç¡€ç¿»è¯‘
- âœ… è°ƒç”¨OpenAIå®Œæ•´ç¿»è¯‘å¹¶å­˜å‚¨åˆ°CloudWords
- âœ… å­˜å‚¨åˆ°CloudWords (å®Œæ•´è¯æ¡)
- ğŸ¯ ç»“æœ: OpenAIå®Œæ•´ç¿»è¯‘ + ä¾‹å¥
```

## ğŸ”„ æŸ¥è¯¢æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥] --> B{æœ¬åœ°è¯åº“å¯ç”¨?}
    B -->|æ˜¯| C[æœ¬åœ°è¯åº“æŸ¥è¯¢]
    B -->|å¦| D[åœ¨çº¿ç¿»è¯‘æŸ¥è¯¢]
    
    C --> E{æœ¬åœ°æŸ¥è¯¢æˆåŠŸ?}
    E -->|æ˜¯| F[OpenAIè¡¥å……ä¾‹å¥]
    E -->|å¦| D
    
    D --> G[OpenAIå®Œæ•´ç¿»è¯‘]
    F --> H[åˆå¹¶: æœ¬åœ°é‡Šä¹‰ + OpenAIä¾‹å¥]
    G --> I[å­˜å‚¨åˆ°CloudWords]
    
    H --> J[è¿”å›å®Œæ•´è¯æ¡]
    I --> J
```

## ğŸ—„ï¸ CloudWordså­˜å‚¨ç­–ç•¥

### å­˜å‚¨æ—¶æœº
- **ä¸å­˜å‚¨**: å½“æœ¬åœ°è¯åº“æœ‰é‡Šä¹‰æ—¶
- **å­˜å‚¨**: å½“åªæœ‰åœ¨çº¿ç¿»è¯‘æˆ–æ— ç»“æœæ—¶

### å­˜å‚¨å†…å®¹
```json
{
  "word": "ã“ã‚“ã«ã¡ã¯",
  "correctedWord": "hello", 
  "translation": "hello",
  "definitions": [{
    "definition": "hello",
    "partOfSpeech": "interjection",
    "examples": ["ã“ã‚“ã«ã¡ã¯ã€å…ƒæ°—ã§ã™ã‹ï¼Ÿ"]
  }],
  "phonetic": "konnichiwa",
  "kana": "ã“ã‚“ã«ã¡ã¯",
  "romaji": "konnichiwa",
  "translationSource": "openai"
}
```

## ğŸŒ å¤šè¯­è¨€é‡Šä¹‰æ”¯æŒ

### ç•Œé¢è¯­è¨€åŒ¹é…
- **ENç•Œé¢** â†’ è‹±æ–‡é‡Šä¹‰
- **ZHç•Œé¢** â†’ ä¸­æ–‡é‡Šä¹‰

### ç¤ºä¾‹
```
è¾“å…¥: "ã“ã‚“ã«ã¡ã¯"
ENç•Œé¢ç»“æœ: "hello" (è‹±æ–‡é‡Šä¹‰)
ZHç•Œé¢ç»“æœ: "ä½ å¥½" (ä¸­æ–‡é‡Šä¹‰)
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. **ç¦»çº¿ä¼˜å…ˆ**
- æœ¬åœ°è¯åº“æŸ¥è¯¢é€Ÿåº¦æœ€å¿«
- å‡å°‘ç½‘ç»œè¯·æ±‚

### 2. **æ™ºèƒ½ç¼“å­˜**
- CloudWordsé¿å…é‡å¤æŸ¥è¯¢
- æœ¬åœ°è¯åº“æŒä¹…åŒ–å­˜å‚¨

### 3. **æŒ‰éœ€åŠ è½½**
- åªåœ¨éœ€è¦æ—¶è°ƒç”¨OpenAI
- é¿å…ä¸å¿…è¦çš„APIè°ƒç”¨

## ğŸ“ˆ æŸ¥è¯¢ç»Ÿè®¡

```typescript
interface QueryStats {
  localDictionaryAvailable: boolean;
  onlineTranslationAvailable: boolean;
  totalLocalEntries: number;
  storageSize: number;
}
```

## ğŸ”§ é…ç½®é€‰é¡¹

```typescript
interface HybridQueryOptions {
  enableLocalDictionary: boolean;
  enableOnlineTranslation: boolean;
  localFirst: boolean;
  maxCandidates: number;
  minConfidence: number;
}
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨æœ¬åœ°è¯åº“** - é€Ÿåº¦å¿«ï¼Œç¦»çº¿å¯ç”¨
2. **OpenAIè¡¥å……ä¾‹å¥** - ä¸°å¯Œè¯æ¡å†…å®¹
3. **æ™ºèƒ½å­˜å‚¨ç­–ç•¥** - é¿å…é‡å¤å­˜å‚¨
4. **å¤šè¯­è¨€æ”¯æŒ** - æ ¹æ®ç•Œé¢è¯­è¨€é€‰æ‹©é‡Šä¹‰
5. **æ€§èƒ½ç›‘æ§** - è·Ÿè¸ªæŸ¥è¯¢ç»Ÿè®¡å’Œæ€§èƒ½

## ğŸ”® æœªæ¥æ‰©å±•

- [ ] è¯åº“è‡ªåŠ¨æ›´æ–°
- [ ] ç”¨æˆ·åå¥½è®¾ç½®
- [ ] æŸ¥è¯¢ç»“æœç¼“å­˜
- [ ] æ›´å¤šè¯­è¨€æ”¯æŒ
- [ ] æœºå™¨å­¦ä¹ ä¼˜åŒ–
