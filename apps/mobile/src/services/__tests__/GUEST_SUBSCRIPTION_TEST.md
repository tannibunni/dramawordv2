# 🧪 游客模式订阅功能测试说明

## 📱 游客模式访问订阅页面的方法

### **1. 主要入口**
游客模式可以通过以下路径访问订阅页面：

```
Profile页面 → 订阅入口 → SubscriptionScreen
```

### **2. 具体步骤**

#### **步骤1: 进入Profile页面**
- 打开应用
- 点击底部导航栏的"Profile"标签
- 确保当前是游客模式（显示"Guest"用户名）

#### **步骤2: 找到订阅入口**
在Profile页面中，你会看到：
- **💎 升级到高级版** 标题
- **解锁多语言支持、AI释义、无限储存等高级功能** 描述
- **立即升级** 按钮
- **游客模式功能受限，升级后可享受完整功能** 提示信息

#### **步骤3: 点击订阅按钮**
- 点击"立即升级"按钮
- 应用会导航到SubscriptionScreen
- 显示完整的订阅计划和功能对比

### **3. 游客模式订阅页面的特点**

#### **订阅状态显示**：
- 显示"📱 免费版用户"
- 描述"当前使用免费版，享受中英文查词功能"

#### **订阅计划**：
- 月度订阅：$2.99/首月
- 年度订阅：$29.99/年
- 终身会员：$79.99

#### **功能对比**：
- 中英文查词：✅ 免费版支持
- 其他语言支持：❌ 需要订阅
- 单词储存：❌ 免费版限制3个
- 复习功能：❌ 免费版基础版
- AI智能释义：❌ 需要订阅

#### **开发测试功能**：
在开发模式下，页面底部会显示测试按钮：
- 测试订阅状态
- 测试功能权限
- 测试语言权限
- 测试模拟订阅
- 清除订阅状态

### **4. 测试场景**

#### **场景1: 游客模式功能限制**
1. 确保是游客模式
2. 尝试添加第4个单词 → 应该显示升级提示
3. 尝试搜索日语单词 → 应该显示升级提示
4. 尝试筛选其他语言 → 应该显示升级提示

#### **场景2: 游客模式订阅流程**
1. 进入订阅页面
2. 选择订阅计划（如月度订阅）
3. 点击订阅按钮
4. 观察模拟订阅流程
5. 检查订阅状态变化

#### **场景3: 订阅后功能解锁**
1. 完成模拟订阅
2. 返回主页面
3. 尝试之前受限的功能
4. 验证功能是否已解锁

### **5. 预期行为**

#### **游客模式（未订阅）**：
- ✅ 可以访问订阅页面
- ✅ 可以看到所有订阅计划
- ✅ 可以模拟订阅
- ❌ 功能受限（语言、储存等）
- ❌ 显示升级提示

#### **订阅用户**：
- ✅ 所有功能解锁
- ✅ 订阅状态正确显示
- ✅ 可以管理订阅

### **6. 测试检查点**

#### **导航功能**：
- [ ] Profile页面显示订阅入口
- [ ] 点击订阅按钮正确导航
- [ ] SubscriptionScreen正常显示

#### **订阅流程**：
- [ ] 订阅计划正确显示
- [ ] 模拟订阅功能正常
- [ ] 订阅状态正确更新

#### **功能限制**：
- [ ] 游客模式功能正确限制
- [ ] 升级提示正确显示
- [ ] 权限检查准确

#### **用户体验**：
- [ ] 游客模式提示友好
- [ ] 升级引导清晰
- [ ] 功能对比明确

### **7. 常见问题排查**

#### **问题1: 订阅入口不显示**
- 检查ProfileScreen中的renderSubscriptionEntry函数
- 确认没有返回null
- 检查样式是否正确

#### **问题2: 点击订阅按钮无反应**
- 检查handleGoToSubscription函数
- 确认navigate('Subscription')调用正确
- 检查NavigationContext配置

#### **问题3: SubscriptionScreen不显示**
- 检查MainLayout中的路由配置
- 确认SubscriptionScreen正确导入
- 检查组件渲染逻辑

#### **问题4: 游客模式提示不显示**
- 检查isAuthenticated状态
- 确认游客模式检测逻辑
- 检查条件渲染逻辑

### **8. 测试建议**

1. **完整流程测试**: 从游客模式进入，完成订阅，验证功能解锁
2. **边界条件测试**: 测试各种订阅状态下的行为
3. **用户体验测试**: 确保提示信息友好，引导清晰
4. **功能限制测试**: 验证免费版功能限制是否正确执行
5. **状态同步测试**: 确保订阅状态在页面间正确同步

---

**注意**: 开发阶段使用模拟数据，不会产生真实费用。游客模式可以正常访问订阅页面，这是用户升级的主要入口。
